# Autostart
exec-once = ~/.swaybg &
exec-once = waybar &
exec-once = dunst &
exec-once = fcitx -d
exec-once = ~/.local/bin/portal

# Toolkit Backend Variables
env = GDK_BACKEND,wayland,x11
env = SDL_VIDEODRIVER,wayland
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = GTK_THEME,Nordic

# Configs
monitor = , prefered, auto, 1

input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options = caps:escape
    kb_rules = 

    follow_mouse = 2

    touchpad {
        natural_scroll = yes
    }

    repeat_rate = 50
    repeat_delay = 300
}

device:genius-wireless-mouse {
    sensitivity = -0.4
}

general {
    gaps_in = 6
    gaps_out = 12
    border_size = 2
    col.active_border = rgb(5e81ac) rgb(88C0D0) 45deg
    col.inactive_border = rgb(3b3252)
    layout = master
    no_cursor_warps = true
}

decoration {
    rounding = 3
    drop_shadow = no
    dim_special = 0
    blur {
        enabled = true
        size = 3
        passes = 1
        new_optimizations = true
        special = false
    }
}

animations {
    enabled = yes

    animation = windows, 1, 2, default, slide
    animation = border, 1, 8, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 1, default
    animation = workspaces, 1, 1, default, slide
}

master {
    new_is_master = false
    mfact = 0.5
    allow_small_split = true
    special_scale_factor = 0.69
}

binds {
    allow_workspace_cycles = true
}

misc {
    enable_swallow = true
    swallow_regex = ^(foot)$
    disable_autoreload = true
    force_hypr_chan = true
    close_special_on_empty = true
}

$mainMod = SUPER

# Exit/close/reload
bind = $mainMod SHIFT, C, killactive, 
bind = $mainMod, F5, exec, hyprctl reload
bind = CONTROL ALT, BACKSPACE, exit

# Applications
bind = $mainMod SHIFT, RETURN, exec, foot
bind = $mainMod SHIFT, E,      exec, foot -e vifm ~ /
bind = $mainMod, B,            exec, qutebrowser
bind = $mainMod, N,            exec, qutebrowser --target private-window
bind = $mainMod SHIFT, B,      exec, firefox
bind = $mainMod SHIFT, N,      exec, firefox --private-window
bind = $mainMod, r,            exec, $(tofi-run --fuzzy-match true --require-match false --prompt-text "")
bind = $mainMod, F2,           exec, swaylock -i "$(cut -d' ' -s -f5 ~/.swaybg)"
bind = $mainMod, F6,           exec, wf-recorder -f ~/Videos/captures/rec-$(date +'%Y-%m-%d_%H-%M-%S.mp4') -a ; notify-send "Recording stopped"
bind = $mainMod SHIFT, F6,     exec, wf-recorder -g "$(slurp)" -f ~/Videos/captures/rec-$(date +'%Y-%m-%d_%H-%M-%S.mp4') -a ; notify-send "Recording stopped"
bind = $mainMod CTRL, F6,      exec, killall -s SIGINT wf-recorder

bind = $mainMod, p, submap, programs
submap = programs

bind = , d, exec, discord
bind = , z, exec, zathura
bind = , t, exec, thunar
bind = , p, exec, foot pulsemixer
bind = , m, exec, prismlauncher
bind = , q, exec, qpwgraph
bind = , l, exec, leagueoflegends start
bind = , k, exec, leagueoflegends stop

bind = , d, submap, reset
bind = , z, submap, reset
bind = , t, submap, reset
bind = , m, submap, reset
bind = , p, submap, reset
bind = , q, submap, reset
bind = , l, submap, reset
bind = , k, submap, reset
bind = , escape, submap, reset
submap = reset

# Tofi scripts
bind = $mainMod SHIFT, m, submap, tofi
submap = tofi

bind = , p, exec, tofi-power
bind = , m, exec, tofi-mount
bind = , u, exec, tofi-umount
bind = , e, exec, tofi-unicode
bind = , k, exec, tofi-kaomoji
bind = , n, exec, tofi-poornitro
bind = , o, exec, tofi-quickmark

bind = , p, submap, reset
bind = , m, submap, reset
bind = , u, submap, reset
bind = , e, submap, reset
bind = , k, submap, reset
bind = , n, submap, reset
bind = , o, submap, reset
bind = , escape, submap, reset
submap = reset

# Monitors
bind = $mainMod, comma, focusmonitor, +1
bind = $mainMod, period, focusmonitor, -1
bind = $mainMod SHIFT, comma, movewindow, mon:+1
bind = $mainMod SHIFT, period, movewindow, mon:-1


# Fullscreen
bind = $mainMod SHIFT, F, fullscreen
bind = $mainMod CONTROL, F, fakefullscreen

# Master layout control
bind = $mainMod, h, movefocus, l
bind = $mainMod, j, movefocus, d
bind = $mainMod, k, movefocus, u
bind = $mainMod, l, movefocus, r
bind = ALT, TAB, cyclenext
bind = $mainMod SHIFT, H, layoutmsg, addmaster
bind = $mainMod SHIFT, J, layoutmsg, swapnext
bind = $mainMod SHIFT, K, layoutmsg, swapprev
bind = $mainMod SHIFT, L, layoutmsg, removemaster
bind = $mainMod, RETURN, layoutmsg, swapwithmaster

# Window Control
bind = $mainMod SHIFT, SPACE, togglefloating, 
binde = $mainMod CONTROL, j, moveactive, 0 25
binde = $mainMod CONTROL, k, moveactive, 0 -25
binde = $mainMod CONTROL, l, moveactive, 25 0
binde = $mainMod CONTROL, h, moveactive, -25 0
binde = $mainMod CONTROL SHIFT, j, resizeactive, 0 25
binde = $mainMod CONTROL SHIFT, k, resizeactive, 0 -25
binde = $mainMod CONTROL SHIFT, l, resizeactive, 25 0
binde = $mainMod CONTROL SHIFT, h, resizeactive, -25 0
binde = $mainMod ALT CONTROL, j, moveactive, 0 1
binde = $mainMod ALT CONTROL, k, moveactive, 0 -1
binde = $mainMod ALT CONTROL, l, moveactive, 1 0
binde = $mainMod ALT CONTROL, h, moveactive, -1 0
binde = $mainMod ALT SHIFT, j, resizeactive, 0 1
binde = $mainMod ALT SHIFT, k, resizeactive, 0 -1
binde = $mainMod ALT SHIFT, l, resizeactive, 1 0
binde = $mainMod ALT SHIFT, h, resizeactive, -1 0

# Workspace switching
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, TAB, workspace, previous

# Workspace moving
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, pin,

# Scroll through existing workspaces
bind = $mainMod, mouse_down, workspace, r-1
bind = $mainMod, mouse_up, workspace, r+1

# Move/resize windows using mouse
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Toggle stuff
bind = $mainMod, g,         exec, ~/.config/hypr/transparent
bind = $mainMod SHIFT, g,   exec, ~/.config/hypr/pretty
bind = $mainMod CONTROL, g, exec, ~/.config/hypr/animate
bind = $mainMod, S,         exec, killall -SIGUSR1 waybar
bind = $mainMod, F1,        exec, killall waybar || waybar &
bind = $mainMod, F3,        exec, ~/.config/hypr/swallow
bind = $mainMod, f,         exec, hyprctl setprop address:$(hyprctl activewindow -j | head -2 | tail -1 | cut -d'"' -f 4) forcergbx 0
bindr = $mainMod, f,        exec, hyprctl setprop address:$(hyprctl activewindow -j | head -2 | tail -1 | cut -d'"' -f 4) forcergbx 1

# Audio
bind = , XF86AudioMute,  exec, pactl set-sink-mute 0 toggle
bind = ,         XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%-  ; notifyvolume
bind = SHIFT,    XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 10%- ; notifyvolume
bind = $mainMod, XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 0%   ; notifyvolume
bind = ,         XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%+  ; notifyvolume
bind = SHIFT,    XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 10%+ ; notifyvolume
bind = $mainMod, XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 100% ; notifyvolume
bind = , XF86AudioPrev, exec, playerctl previous
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioStop, exec, playerctl stop

# Brightness
bind = ,         XF86MonBrightnessDown, exec, brightnessctl s 1%-  ; notifybrightness
bind = SHIFT,    XF86MonBrightnessDown, exec, brightnessctl s 10%- ; notifybrightness
bind = $mainMod, XF86MonBrightnessDown, exec, brightnessctl s 0%   ; notifybrightness
bind = ,         XF86MonBrightnessUp,   exec, brightnessctl s +1%  ; notifybrightness
bind = SHIFT,    XF86MonBrightnessUp,   exec, brightnessctl s +10% ; notifybrightness
bind = $mainMod, XF86MonBrightnessUp,   exec, brightnessctl s 100% ; notifybrightness

# Screenshots
bind = $mainMod SHIFT, S,             exec, screenshot s
bind = $mainMod CONTROL, S,           exec, screenshot f
bind = $mainMod ALT SHIFT, S,         exec, screenshot ss
bind = $mainMod ALT CONTROL, S,       exec, screenshot fs
bind = $mainMod CONTROL SHIFT, S,     exec, screenshot ds
bind = $mainMod ALT CONTROL SHIFT, S, exec, screenshot df

# Global Hotkeys
bind = , Alt_R, pass, ^(discord)$
bind = $mainMod, MENU, pass, ^(discord)$

# Window Rules
windowrule = workspace 4 silent, discord
windowrulev2 = float,class:^(xwaylandvideobridge)$
windowrulev2 = pin,class:^(xwaylandvideobridge)$
windowrulev2 = opacity 0.0 override 0.0 override,class:^(xwaylandvideobridge)$
windowrulev2 = noanim,class:^(xwaylandvideobridge)$
windowrulev2 = nofocus,class:^(xwaylandvideobridge)$
windowrulev2 = noinitialfocus,class:^(xwaylandvideobridge)$

# Special Workspaces
bind = $mainMod, a,     togglespecialworkspace, term
bind = $mainMod, w,     togglespecialworkspace, notes
bind = $mainMod, e,     togglespecialworkspace, fm
bind = $mainMod, grave, togglespecialworkspace, music
bind = $mainMod, t,     togglespecialworkspace, mail
bind = $mainMod, d,     togglespecialworkspace, when
bind = $mainMod, q,     togglespecialworkspace, jpdb
bind = $mainMod, v,     togglespecialworkspace, any

bind = $mainMod, a,     exec, [workspace special:term]  hyprctl clients -j | grep -q '^\s\+"name": "special:term"'  || foot
bind = $mainMod, w,     exec, [workspace special:notes] hyprctl clients -j | grep -q '^\s\+"name": "special:notes"' || foot nvim ~/Documents/vimwiki/index.md
bind = $mainMod, e,     exec, [workspace special:fm]    hyprctl clients -j | grep -q '^\s\+"name": "special:fm"'    || foot vifm ~ /
bind = $mainMod, grave, exec, [workspace special:music] hyprctl clients -j | grep -q '^\s\+"name": "special:music"' || foot cmus
bind = $mainMod, t,     exec, [workspace special:mail]  hyprctl clients -j | grep -q '^\s\+"name": "special:mail"'  || thunderbird
bind = $mainMod, d,     exec, [workspace special:when;float;move 1453 37;size 453 1029] hyprctl clients -j | grep -q '^\s\+"name": "special:when"' || foot sh -c "when ; bash"

bind = $mainMod SHIFT, q, exec, [workspace special:jpdb;noanim;float;stayfocused;move 1453 37;size 453 1029] hyprctl clients -j | grep -q '^\s\+"name": "special:jpdb"' || qutebrowser --target window jpdb.io/learn

bind = $mainMod shift, v, movetoworkspace, special:any
bind = $mainMod SHIFT, r, movetoworkspace, e+0

source = ~/.config/hypr/cursor.conf
